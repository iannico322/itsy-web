import{a as y,r as t,j as e,L as j}from"./index-f0c16f7a.js";import{B as w}from"./button-19ba55dc.js";import{I as x,R as b}from"./react-icons.esm-298bc215.js";import{a as v}from"./axios-0a52c127.js";import{A as N}from"./alert-8efdc3c5.js";import"./utils-c34355c1.js";const R=()=>{const d=y(),[r,n]=t.useState({load:!1,type:"",title:"",message:""}),[s,i]=t.useState({...d,new_password:"",re_new_password:""}),[o,u]=t.useState(!1),[l,m]=t.useState(!1),f=a=>!(a.length<8||!/\d/.test(a));t.useEffect(()=>{u(f(s.new_password))},[s.new_password]),t.useEffect(()=>{s.new_password==s.re_new_password&&s.new_password!=""&&s.re_new_password!=""?m(!0):m(!1)},[s.new_password,s.re_new_password]);const[h,g]=t.useState(!1);async function _(){if(o&&l){n({load:!0,type:"",title:"",message:""});try{await v.post("users/reset_password_confirm/",s).then(a=>{console.log(a.status),n({load:!0,type:"success",title:"Congratulations, Password has updated!",message:"Hooray! Your account password has been successfully updated."}),setTimeout(()=>{n({load:!1,type:"",title:"",message:""}),i({...d,new_password:"",re_new_password:""}),g(!0)},3e3)})}catch{n({load:!0,type:"error",title:"Password Rest Unsuccessful",message:"Oops! There might be a problem."}),setTimeout(()=>{n({load:!1,type:"",title:"",message:""})},6e3)}}}const c=a=>{i({...s,[a.target.name]:a.target.value})},p=a=>{a.key==="Enter"&&console.log("Enter key pressed")};return e.jsxs("div",{className:" h-screen  w-screen flex items-center justify-center bg-black/10 flex-col gap-4 ",children:[e.jsxs("div",{className:" sm:min-w-[90%] min-w-[500px] min-h-[200px] pb-12  max-w-[500px]  max-h-[700px] bg-card/90 border-border border-[1px] backdrop-blur-md rounded-md p-6 flex flex-col items-center animate__animated animate__fadeInUp ",children:[e.jsx("h1",{className:" text-3xl font-semibold ml-10 sm:ml-4 flex self-start text-accent-foreground",children:"Sign In"}),e.jsxs("form",{onSubmit:a=>{a.preventDefault()},className:"  flex flex-col gap-4 mt-8 w-[80%] sm:w-[90%]",children:[e.jsxs("div",{children:[e.jsx(x,{type:"password",placeholder:"New password",value:s.new_password,name:"new_password",onChange:c,onKeyDown:p}),e.jsx("p",{className:o?" text-xs ml-2 mt-1 text-green-500":" text-xs ml-2 mt-1 text-red-500",children:o?"Valid password":"It must be at least 8 characters and include numbers."})]}),e.jsxs("div",{children:[e.jsx(x,{type:"password",placeholder:"Confirm New Password",value:s.re_new_password,name:"re_new_password",onChange:c,onKeyDown:p}),e.jsx("p",{className:l?" text-xs ml-2 mt-1 text-green-500":" text-xs ml-2 mt-1 text-red-500",children:l?"Password match":"Password not match"})]}),e.jsxs(w,{variant:"secondary",className:r.load?"px-10 sm:w-full flex gap-3 pointer-events-none ":"px-10 sm:w-full flex gap-3",onClick:_,children:["Update Password",e.jsx(b,{className:r.load?" h-4 w-4 animate-spin":"hidden"})]}),e.jsx("div",{className:r.load?"flex":"hidden",children:e.jsx(N,{variant:r.type,title:r.title,description:r.message})})]})]}),e.jsx(w,{className:h?"flex":"hidden",children:e.jsx(j,{id:"step1",to:"/itsy-web/itsy",children:"Sign In"})})]})};export{R as default};
